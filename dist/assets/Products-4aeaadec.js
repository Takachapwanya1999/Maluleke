import{r as i,j as e,d as R,e as k,f as F,g as q,h as L}from"./index-dde97d41.js";import{p as y}from"./products-d0294a5e.js";import{P}from"./ProductCard-d862d682.js";const M=({products:n,onFilteredProducts:o,categories:d})=>{const[r,m]=i.useState({query:"",category:"",priceRange:[0,1e3],minRating:0,inStockOnly:!1,sortBy:"name"}),[g,l]=i.useState(!1),[f,j]=i.useState([]),[b,u]=i.useState(!1),x=i.useMemo(()=>Math.max(...n.map(s=>s.price)),[n]);i.useEffect(()=>{if(r.query.length>1){const t=n.map(a=>a.name.toLowerCase()).filter(a=>a.includes(r.query.toLowerCase())).slice(0,5);j(t),u(t.length>0)}else u(!1)},[r.query,n]);const h=i.useMemo(()=>{let s=n.filter(t=>{const a=r.query===""||t.name.toLowerCase().includes(r.query.toLowerCase())||t.description.toLowerCase().includes(r.query.toLowerCase())||t.category.toLowerCase().includes(r.query.toLowerCase()),N=r.category===""||t.category===r.category,w=t.price>=r.priceRange[0]&&t.price<=r.priceRange[1],C=t.rating>=r.minRating,S=!r.inStockOnly||t.inStock;return a&&N&&w&&C&&S});return s.sort((t,a)=>{switch(r.sortBy){case"price-low":return t.price-a.price;case"price-high":return a.price-t.price;case"rating":return a.rating-t.rating;case"newest":return a.id.localeCompare(t.id);case"name":default:return t.name.localeCompare(a.name)}}),s},[n,r]);i.useEffect(()=>{o(h)},[h,o]);const c=(s,t)=>{m(a=>({...a,[s]:t}))},v=()=>{m({query:"",category:"",priceRange:[0,x],minRating:0,inStockOnly:!1,sortBy:"name"})},p=r.category!==""||r.priceRange[0]>0||r.priceRange[1]<x||r.minRating>0||r.inStockOnly||r.sortBy!=="name";return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search for products...",value:r.query,onChange:s=>c("query",s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent"})]}),b&&e.jsx("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg z-10 mt-1",children:f.map((s,t)=>e.jsx("button",{onClick:()=>{c("query",s),u(!1)},className:"w-full text-left px-4 py-2 hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg",children:s},t))})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>l(!g),className:`flex items-center gap-2 px-4 py-2 rounded-lg border transition-colors ${g||p?"bg-primary-50 border-primary-200 text-primary-700":"bg-gray-50 border-gray-200 text-gray-700 hover:bg-gray-100"}`,children:[e.jsx(k,{size:16}),"Filters",p&&e.jsx("span",{className:"bg-primary-500 text-white text-xs rounded-full px-2 py-0.5",children:"Active"})]}),p&&e.jsxs("button",{onClick:v,className:"text-sm text-gray-500 hover:text-gray-700 flex items-center gap-1",children:[e.jsx(F,{size:14}),"Clear all"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm text-gray-600",children:"Sort by:"}),e.jsxs("select",{value:r.sortBy,onChange:s=>c("sortBy",s.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"price-low",children:"Price: Low to High"}),e.jsx("option",{value:"price-high",children:"Price: High to Low"}),e.jsx("option",{value:"rating",children:"Highest Rated"}),e.jsx("option",{value:"newest",children:"Newest"})]})]})]}),g&&e.jsx("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),e.jsxs("select",{value:r.category,onChange:s=>c("category",s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"All Categories"}),d.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Price Range: R",r.priceRange[0]," - R",r.priceRange[1]]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("input",{type:"range",min:0,max:x,value:r.priceRange[0],onChange:s=>c("priceRange",[Number(s.target.value),r.priceRange[1]]),className:"w-full"}),e.jsx("input",{type:"range",min:0,max:x,value:r.priceRange[1],onChange:s=>c("priceRange",[r.priceRange[0],Number(s.target.value)]),className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Minimum Rating"}),e.jsxs("select",{value:r.minRating,onChange:s=>c("minRating",Number(s.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",children:[e.jsx("option",{value:0,children:"Any Rating"}),e.jsx("option",{value:4,children:"4+ Stars"}),e.jsx("option",{value:4.5,children:"4.5+ Stars"}),e.jsx("option",{value:5,children:"5 Stars"})]})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:r.inStockOnly,onChange:s=>c("inStockOnly",s.target.checked),className:"rounded border-gray-300 text-primary-600 focus:ring-primary-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"In Stock Only"})]})})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:["Showing ",h.length," of ",n.length," products"]})]})},z=()=>{const[n,o]=i.useState("grid"),[d,r]=i.useState(y),m=i.useMemo(()=>Array.from(new Set(y.map(l=>l.category))),[]),g=i.useCallback(l=>{r(l)},[]);return e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Our Products"}),e.jsx("p",{className:"text-gray-600",children:"Discover our wide range of quality products at great prices"})]}),e.jsx(M,{products:y,onFilteredProducts:g,categories:m}),e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",d.length," products"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>o("grid"),className:`p-2 rounded-lg transition-colors duration-200 ${n==="grid"?"bg-primary-100 text-primary-600":"text-gray-400 hover:text-gray-600"}`,children:e.jsx(q,{className:"h-5 w-5"})}),e.jsx("button",{onClick:()=>o("list"),className:`p-2 rounded-lg transition-colors duration-200 ${n==="list"?"bg-primary-100 text-primary-600":"text-gray-400 hover:text-gray-600"}`,children:e.jsx(L,{className:"h-5 w-5"})})]})]}),d.length>0?e.jsx("div",{className:n==="grid"?"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6":"space-y-4",children:d.map(l=>e.jsx(P,{product:l},l.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 text-gray-300",children:e.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No products found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search criteria"})]})]})};export{z as default};
